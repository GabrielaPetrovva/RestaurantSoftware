<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bar Dashboard</title>
     <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <h1 id="headerTitle">Bar Dashboard</h1>
        <div class="header-right">
            <span class="user-name" id="userName">Petar Petrov</span>
            <button class="lang-btn" onclick="toggleLanguage()" id="langBtn" style="padding: 8px 16px; border: none; border-radius: 6px; background: #2563eb; color: white; cursor: pointer; font-weight: 500; margin-right: 10px;">EN</button>
            <span class="exit-btn" id="exitBtn">Exit</span>
        </div>
    </div>

    <div class="main-container">
        <div class="left-section">
            <div class="tabs">
                <button class="tab active" data-tab="orders" id="tabOrders">Orders</button>
                <button class="tab metrics" data-tab="metrics" id="tabMetrics">Metrics <span class="notification-badge">3</span></button>
            </div>

            <!-- Orders Section -->
            <div class="content-section active" id="orders-section">
                <div class="order-card">
                    <div class="order-header">
                        <div class="order-info">
                            <div class="order-number"><span data-i18n="Order #">Order #</span>23</div>
                            <div class="order-customer">Ivan Ivanov</div>
                            <div class="table-info"><span data-i18n="Table">Table</span> 2</div>
                        </div>
                        <div class="order-time">5:35</div>
                    </div>
                    <div class="drink-item">
                        Mojito
                        <div class="drink-note" data-i18n="No mint">No mint</div>
                    </div>
                    <div class="drink-item">
                        Espresso
                    </div>
                    <button class="btn btn-start" data-i18n="Start preparing">Start preparing</button>
                </div>

                <div class="order-card">
                    <div class="order-header">
                        <div class="order-info">
                            <div class="order-number"><span data-i18n="Order #">Order #</span>24 <span class="priority-badge" data-i18n="Priority">Priority</span></div>
                            <div class="order-customer">Aleksandar</div>
                            <div class="table-info"><span data-i18n="Table">Table</span> 3</div>
                        </div>
                        <div class="order-time">1:20</div>
                    </div>
                    <div class="drink-item">
                        Margarita
                        <div class="drink-note" data-i18n="Salt rim">Salt rim</div>
                    </div>
                    <div class="drink-item">
                        Aperol Spritz
                    </div>
                    <button class="btn btn-ready" data-i18n="Ready">Ready</button>
                </div>
            </div>

            <!-- Metrics Section -->
            <div class="content-section" id="metrics-section">
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-title" data-i18n="Total Revenue (Today)">Total Revenue (Today)</div>
                        <div class="metric-value-large">$1,247</div>
                        <div class="metric-subtitle" data-i18n="+18% from yesterday">+18% from yesterday</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title" data-i18n="Total Drinks Served">Total Drinks Served</div>
                        <div class="metric-value-large">89</div>
                        <div class="metric-subtitle" data-i18n="14 in progress">14 in progress</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title" data-i18n="Average Prep Time">Average Prep Time</div>
                        <div class="metric-value-large">00:47</div>
                        <div class="metric-subtitle" data-i18n="Target: 01:00">Target: 01:00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title" data-i18n="Customer Satisfaction">Customer Satisfaction</div>
                        <div class="metric-value-large">4.8/5</div>
                        <div class="metric-subtitle" data-i18n="Based on 34 reviews">Based on 34 reviews</div>
                    </div>
                </div>

                <div class="chart-section">
                    <div class="section-title" data-i18n="Revenue by Drink Type">Revenue by Drink Type</div>
                    <div class="chart-container">
                        <div class="bar-chart">
                            <div class="bar-item">
                                <div class="bar-label" data-i18n="Cocktails">Cocktails</div>
                                <div class="bar-wrapper">
                                    <div class="bar-fill" style="width: 75%;">$623</div>
                                </div>
                            </div>
                            <div class="bar-item">
                                <div class="bar-label" data-i18n="Coffee">Coffee</div>
                                <div class="bar-wrapper">
                                    <div class="bar-fill" style="width: 45%;">$287</div>
                                </div>
                            </div>
                            <div class="bar-item">
                                <div class="bar-label" data-i18n="Beer/Wine">Beer/Wine</div>
                                <div class="bar-wrapper">
                                    <div class="bar-fill" style="width: 35%;">$189</div>
                                </div>
                            </div>
                            <div class="bar-item">
                                <div class="bar-label" data-i18n="Soft Drinks">Soft Drinks</div>
                                <div class="bar-wrapper">
                                    <div class="bar-fill" style="width: 25%;">$148</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-section">
                    <div class="section-title" data-i18n="Top Selling Drinks">Top Selling Drinks</div>
                    <div class="top-drinks-list">
                        <div class="drink-list-item">
                            <div class="drink-rank">1</div>
                            <div class="drink-details">
                                <div class="drink-list-name">Mojito</div>
                                <div class="drink-category" data-i18n="Cocktails">Cocktails</div>
                            </div>
                            <div class="drink-stats">
                                <div class="drink-count">23</div>
                                <div class="drink-revenue">$276</div>
                            </div>
                        </div>
                        <div class="drink-list-item">
                            <div class="drink-rank">2</div>
                            <div class="drink-details">
                                <div class="drink-list-name">Espresso</div>
                                <div class="drink-category" data-i18n="Coffee">Coffee</div>
                            </div>
                            <div class="drink-stats">
                                <div class="drink-count">19</div>
                                <div class="drink-revenue">$57</div>
                            </div>
                        </div>
                        <div class="drink-list-item">
                            <div class="drink-rank">3</div>
                            <div class="drink-details">
                                <div class="drink-list-name">Margarita</div>
                                <div class="drink-category" data-i18n="Cocktails">Cocktails</div>
                            </div>
                            <div class="drink-stats">
                                <div class="drink-count">17</div>
                                <div class="drink-revenue">$221</div>
                            </div>
                        </div>
                        <div class="drink-list-item">
                            <div class="drink-rank">4</div>
                            <div class="drink-details">
                                <div class="drink-list-name">Aperol Spritz</div>
                                <div class="drink-category" data-i18n="Cocktails">Cocktails</div>
                            </div>
                            <div class="drink-stats">
                                <div class="drink-count">15</div>
                                <div class="drink-revenue">$195</div>
                            </div>
                        </div>
                        <div class="drink-list-item">
                            <div class="drink-rank">5</div>
                            <div class="drink-details">
                                <div class="drink-list-name">Cappuccino</div>
                                <div class="drink-category" data-i18n="Coffee">Coffee</div>
                            </div>
                            <div class="drink-stats">
                                <div class="drink-count">14</div>
                                <div class="drink-revenue">$56</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-section">
                    <div class="section-title" data-i18n="Preparation Time Statistics">Preparation Time Statistics</div>
                    <div class="time-stats">
                        <div class="time-card">
                            <div class="time-label" data-i18n="Fastest">Fastest</div>
                            <div class="time-value">00:23</div>
                        </div>
                        <div class="time-card">
                            <div class="time-label" data-i18n="Average">Average</div>
                            <div class="time-value">00:47</div>
                        </div>
                        <div class="time-card">
                            <div class="time-label" data-i18n="Slowest">Slowest</div>
                            <div class="time-value">02:15</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="right-section">
            <div class="stats-card">
                <div class="stat-row">
                    <div class="stat-label" data-i18n="Average preparation time">Average preparation time</div>
                    <div class="stat-value">00:47</div>
                </div>
                <div class="stat-row">
                    <div class="stat-label" data-i18n="Late orders">Late orders</div>
                    <div class="stat-value">1</div>
                </div>
                <div class="stat-row">
                    <div class="stat-label" data-i18n="Total orders">Total orders</div>
                    <div class="stat-value">14</div>
                </div>
            </div>

            <div class="order-quick-card">
                <div class="quick-header">
                    <div>
                        <div class="order-number"><span data-i18n="Order #">Order #</span>33</div>
                        <div class="order-customer">Kaloyan</div>
                    </div>
                    <div class="order-type" data-i18n="Takeaway">Takeaway</div>
                </div>
                <div class="drink-name">Burger</div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 12px;">
                    <button class="bump-off-btn" data-i18n="Bump off">Bump off</button>
                    <button class="btn btn-served" style="width: auto; margin: 0;" data-i18n="Served">Served</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Translation functionality
        let currentLang = localStorage.getItem('barDashboardLang') || 'en';
        
        const translations = {
            bg: {
                // Header
                'Bar Dashboard': 'Бар Табло',
                'Petar Petrov': 'Петър Петров',
                'Exit': 'Изход',
                // Tabs
                'Orders': 'Поръчки',
                'Metrics': 'Метрики',
                // Orders
                'Order #': 'Поръчка #',
                'Table': 'Маса',
                'Start preparing': 'Започни подготовка',
                'Ready': 'Готово',
                'Priority': 'Приоритет',
                'No mint': 'Без мента',
                'Salt rim': 'Солен ръб',
                // Metrics
                'Total Revenue (Today)': 'Общ приход (Днес)',
                '+18% from yesterday': '+18% от вчера',
                'Total Drinks Served': 'Общо сервирани напитки',
                '14 in progress': '14 в процес',
                'Average Prep Time': 'Средно време за подготовка',
                'Target: 01:00': 'Цел: 01:00',
                'Customer Satisfaction': 'Удовлетвореност на клиентите',
                'Based on 34 reviews': 'Въз основа на 34 отзива',
                'Revenue by Drink Type': 'Приход по тип напитка',
                'Cocktails': 'Коктейли',
                'Coffee': 'Кафе',
                'Beer/Wine': 'Бира/Вино',
                'Soft Drinks': 'Безалкохолни напитки',
                'Top Selling Drinks': 'Най-продавани напитки',
                'Preparation Time Statistics': 'Статистика за време на подготовка',
                'Fastest': 'Най-бързо',
                'Average': 'Средно',
                'Slowest': 'Най-бавно',
                // Stats
                'Average preparation time': 'Средно време за подготовка',
                'Late orders': 'Закъснели поръчки',
                'Total orders': 'Общо поръчки',
                'Takeaway': 'За вкъщи',
                'Bump off': 'Премахни',
                'Served': 'Сервирано',
                'In Progress': 'В процес'
            },
            en: {
                // Header
                'Bar Dashboard': 'Bar Dashboard',
                'Petar Petrov': 'Petar Petrov',
                'Exit': 'Exit',
                // Tabs
                'Orders': 'Orders',
                'Metrics': 'Metrics',
                // Orders
                'Order #': 'Order #',
                'Table': 'Table',
                'Start preparing': 'Start preparing',
                'Ready': 'Ready',
                'Priority': 'Priority',
                'No mint': 'No mint',
                'Salt rim': 'Salt rim',
                // Metrics
                'Total Revenue (Today)': 'Total Revenue (Today)',
                '+18% from yesterday': '+18% from yesterday',
                'Total Drinks Served': 'Total Drinks Served',
                '14 in progress': '14 in progress',
                'Average Prep Time': 'Average Prep Time',
                'Target: 01:00': 'Target: 01:00',
                'Customer Satisfaction': 'Customer Satisfaction',
                'Based on 34 reviews': 'Based on 34 reviews',
                'Revenue by Drink Type': 'Revenue by Drink Type',
                'Cocktails': 'Cocktails',
                'Coffee': 'Coffee',
                'Beer/Wine': 'Beer/Wine',
                'Soft Drinks': 'Soft Drinks',
                'Top Selling Drinks': 'Top Selling Drinks',
                'Preparation Time Statistics': 'Preparation Time Statistics',
                'Fastest': 'Fastest',
                'Average': 'Average',
                'Slowest': 'Slowest',
                // Stats
                'Average preparation time': 'Average preparation time',
                'Late orders': 'Late orders',
                'Total orders': 'Total orders',
                'Takeaway': 'Takeaway',
                'Bump off': 'Bump off',
                'Served': 'Served',
                'In Progress': 'In Progress'
            }
        };
        
        function t(key) {
            return translations[currentLang][key] || key;
        }
        
        function toggleLanguage() {
            currentLang = currentLang === 'bg' ? 'en' : 'bg';
            localStorage.setItem('barDashboardLang', currentLang);
            document.getElementById('langBtn').textContent = currentLang === 'bg' ? 'EN' : 'БГ';
            updateAllTranslations();
        }
        
        function updateAllTranslations() {
            // Update header
            document.getElementById('headerTitle').textContent = t('Bar Dashboard');
            document.getElementById('userName').textContent = t('Petar Petrov');
            document.getElementById('exitBtn').textContent = t('Exit');
            
            // Update tabs
            const ordersTab = document.getElementById('tabOrders');
            if (ordersTab) {
                ordersTab.childNodes[0].textContent = t('Orders');
            }
            const metricsTab = document.getElementById('tabMetrics');
            if (metricsTab) {
                // Metrics tab has a badge, so we need to update the first text node
                const textNodes = Array.from(metricsTab.childNodes).filter(n => n.nodeType === 3);
                if (textNodes.length > 0) {
                    textNodes[0].textContent = t('Metrics') + ' ';
                }
            }
            
            // Update all text elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                const translated = t(key);
                
                // For elements that are just text (no child elements)
                if (el.children.length === 0) {
                    el.textContent = translated;
                } else {
                    // For elements with children, update only the text nodes that match the key
                    const textNodes = Array.from(el.childNodes).filter(n => n.nodeType === 3);
                    textNodes.forEach(node => {
                        const nodeText = node.textContent.trim();
                        if (nodeText === key || nodeText.startsWith(key)) {
                            node.textContent = translated + (nodeText.length > key.length ? nodeText.substring(key.length) : '');
                        }
                    });
                }
            });
            
            // Update buttons that may have been changed to "In Progress"
            document.querySelectorAll('.btn-ready').forEach(btn => {
                if (btn.textContent.includes('Progress') || btn.textContent.includes('процес')) {
                    btn.textContent = t('In Progress');
                }
            });
        }

        
        
        // Render bar queue
        <div id="barQueue"></div>

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('langBtn').textContent = currentLang === 'bg' ? 'EN' : 'БГ';
            updateAllTranslations();
        });
    </script>
   <script type="module">
  import { startAuthRedirectGuard } from "../js/auth-redirect.js";
  startAuthRedirectGuard();
</script>

<script type="module" src="../js/auth-redirect.js"></script>
<script type="module" src="./bar-data.js"></script>
<script type="module" src="../js/logout.js"></script>
<script src="./script.js"></script>


</body>
</html>